<!DOCTYPE html>
<html lang="zh" class="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
    <meta name="baidu-site-verification" content=""/>
    #if(USER)
    <title>#(USER.nickname ??) - #(title??) | #(SEO_TITLE ?? (WEB_TITLE + '-' + WEB_SUBTITLE))</title>
    #else
    <title>- #(title??) | #(SEO_TITLE ?? (WEB_TITLE + '-' + WEB_SUBTITLE))</title>
    #end
    <meta name="description"
          content="#(SEO_DESCRIPTION  ??)"/>
    <meta name="keywords"
          content="#(SEO_KEYWORDS ??)"/>

    <meta name="author" content="dong"/>

    <link rel="shortcut icon" href=""/>

    <link href="../resource/css/vendors.css" rel="stylesheet">
    <link href="../resource/css/app.css" rel="stylesheet">
    <link rel="stylesheet" href="../resource/assets/editor/css/editormd.css">
    <link rel="stylesheet" href="../resource/assets/editor/lib/codemirror/codemirror.min.css">
</head>

<body class=" articles-create-page">

<script>
    window.Config = {
        'CSRF_TOKEN': '',
        'token': '',
        'environment': 'production',
        'url': '',
        'cdn_domain':'',
        'tags_url': '',
        'scroll_to_top': true,
        'community': {
            'id': 0,
            'name': '',
            'favicon': ''
        },
        'routes': {
            'upload_image': '',
        },
        'user_settings': {
            'visit_topic_patches_page': false,
            'annotation_disabled': 'yes',
        },
        'overlay': '',
        'editor': {},
        'destroyeditor_id': {},

        'content': {
            authorName:'dong'
        }
    };

    var ShowCrxHint = 'no';

    function onWXWebView() {
        $('.wechat-login-link').attr("href", "")
        $('.show-on-wechat-view').show();
    }

    if (typeof WeixinJSBridge == "object" && typeof WeixinJSBridge.invoke == "function") {
        onWXWebView();
    } else {
        if (document.addEventListener) {
            document.addEventListener("WeixinJSBridgeReady", onWXWebView, false);
        } else if (document.attachEvent) {
            document.attachEvent("WeixinJSBridgeReady", onWXWebView);
            document.attachEvent("onWeixinJSBridgeReady", onWXWebView);
        }
    }

</script>

<style>

    .ui.top.menu {
        border-top: 4px solid #00b5ad;
    }

    .ui.fluid.search .results {
        width: 550px;
    }

    @media only screen and (max-width: 767px) {
        .ui.top.menu > .ui.container {
            height: 52px;
            flex-direction: initial;
        }
    }


    /* 顶部导航栏 */
    .ui.top.menu {
        border-top: 4px solid #368cda;
    }

    /* 右边导航栏顶部样式 */
    .ui.top-color.segment:not(.inverted) {
        border-top: 2px solid #368cda;
    }

    /* 右边导航栏顶部样式 */
    .ui.top-color.card:not(.inverted) {
        border-top: 2px solid #368cda;
    }

    /* 主要按钮 */

    .ui.primary.buttons .button, .ui.primary.button {
        background-color: #368cda;
        border-color: #368cda;
    }

    /* 主要按钮选中状态 */
    .ui.primary.buttons .button:hover, .ui.primary.button:hover, .ui.primary.button:active, .ui.primary.buttons .button:active, .ui.primary.button:focus, .ui.primary.buttons .button:focus, .ui.primary.active.button, .ui.primary.button .active.button:active, .ui.primary.buttons .active.button, .ui.primary.buttons .active.button:active {
        background-color: #368cda;
        border-color: #368cda;
    }

    /* 外框按钮 */
    .ui.basic.primary.buttons .button, .ui.basic.primary.button {
        color: #368cda !important;
        box-shadow: 0px 0px 0px 1px #368cda inset !important;
    }

    /* 外框按钮选中状态 */
    .ui.basic.primary.buttons .button:hover, .ui.basic.primary.button:hover {
        color: #368cda !important;
        box-shadow: 0px 0px 0px 1px #368cda inset !important;
    }

    .ui.basic.primary.buttons .active.button, .ui.basic.primary.active.button {
        color: #368cda !important;
        box-shadow: 0px 0px 0px 1px #368cda inset !important;
    }

    .ui.basic.primary.buttons .button:active, .ui.basic.primary.button:active, .ui.basic.primary.buttons .active.button, .ui.basic.primary.active.button, .ui.basic.buttons .button:hover, .ui.basic.button:hover, .ui.basic.primary.buttons .button:focus, .ui.basic.primary.button:focus {
        box-shadow: 0px 0px 0px 1px #368cda inset !important;
    }

    .pagination > .active > a, .pagination > .active > a:focus, .pagination > .active > a:hover, .pagination > .active > span, .pagination > .active > span:focus, .pagination > .active > span:hover {
        background-color: #368cda;
        border-color: #368cda;
    }

    .pagination > li > a, .pagination > li > span {
        color: #368cda;
    }


    .footer {
        max-height: max-content;
    }

</style>


<div class="ui top menu sidebar stackable">
    <div class="item">
        <img class="ui image" style="width:26px;height:26px;margin-top:-2px;"
             src="resource/img/admin.gif">
        <span class="site-name ml-2">#(WEB_NAME)</span>
    </div>

    <form class="ui fluid category  item secondary" action="/article/search" method="GET">
        <div class="ui icon input">
            <input class="prompt" name="keyword" type="text" placeholder="搜索" value="">
            <i class="search icon"></i>
        </div>
    </form>

    #categories(asTree=true)
    #for(category :categories)
    <a href="#(category.slug)" class="item secondary">
        <i class="icon list"></i> #(category.title)
    </a>
    #end
    #end


    <div class="item">
        <a class="ui basic small button no-pjax" href=""><i class="icon user "></i> 登录 </a>
    </div>
</div>


<div class="pusher in-editor-view">
    <div class="main container">

        <nav class="ui main borderless menu top stackable topnav" id="topnav">
            <div class="ui container">

                <div class="ui inline scrolling community-nav dropdown mr-2"
                     style="padding-left: 22px;display: -webkit-box;display: -ms-flexbox;display: flex;-webkit-box-align: center;-ms-flex-align: center;align-items: center;">
                    <div class="text site-logo" style="color:#888888;display: flex;">

                        <img class="ui image" style="width:26px;height:26px;margin-top:-2px;"
                             src="resource/img/admin.gif">
                        <span class="site-name">#(WEB_NAME)</span>
                        <i class="dropdown icon ml-3"></i>
                    </div>
                    <div class="menu ml-4 communities" style="max-height: 520px;padding: 8px;">
                        <div class="ui icon search input" style="width: 172px;float:left;">
                            <i class="search icon"></i>
                            <input type="text" placeholder="搜索分类">
                        </div>

                        <a class="item pr-3 mt-2" href="index.html">
                            <img class="ui image" style="width:20px;height:20px;margin-top:-2px;" src="resource/img/admin.gif"> 首页
                        </a>
                        <div class="divider clearfix"></div>
                        #categories(asTree=true)
                        #for(category :categories)
                        <a class="item" href="#(category.slug)" style="padding-right: 2.2em!important;">
                            <img class="ui image" style="width:20px;height:20px;margin-top:-2px;"
                                 src="#(category.icon)">
                            #(category.title)
                        </a>
                        #end
                        #end
                    </div>
                </div>

                <a class="item header right menu " style="display:none">
                    <i class="icon align justify"></i>
                </a>

                <!-- 主菜单 -->
                #for(menu : MENUS)
                #if(menu.hasChild())
                <div class="ui simple item dropdown article stackable nav-user-item  secondary">#(menu.text ??)<i class="dropdown icon"></i>
                    <div class="ui menu stackable">
                        #for(childMenu : menu.getChilds())
                        <a class="item" href="#(childMenu.url ??)"
                           style="padding-right: 36px!important;">
                            #(childMenu.text ??)
                        </a>
                        #end
                    </div>
                </div>
                #else
                <a href="#(menu.url ??)" class="item secondary">#(menu.text ??)</a>
                #end
                #end

                <!-- 搜索框 -->
                <form class="ui fluid category search item secondary hide-on-991" action="/article/search"
                      method="GET">
                    <div class="ui icon input">
                        <input class="prompt" name="keyword" type="text" placeholder="搜索" value="">
                        <i class="search icon"></i>
                    </div>
                    <div class="results"></div>
                </form>

                <!-- 登录注册 -->
                <div class=" right menu stackable secondary">
                    <div class="item rm-link-color">
                        <a class="mr-4 no-pjax login_required" href=""><i class="icon sign in "></i> 登录
                        </a>
                    </div>
                </div>
            </div>

        </nav>
        <div class="mb-3 hide show-on-wechat-view">
            <div class="ui centered grid container message-container">
                <div class="sixteen wide column pt-0 pb-0">
                    <a class="ui button fluid green wechat-login-link"
                       href="#(CPATH)/oauth/wechat"><i class="icon wechat "></i> 微信登录</a>
                </div>
            </div>
        </div>


        <div class="ui centered grid container stackable">
            <div class=" column">
                <div class="ui segment">


                    <a class="ui right corner label compose-help" href="javascript:;">
                        <i class="info icon"></i>
                    </a>

                    <div class="content extra-padding">

                        <div class="ui header text-center text gery" style="margin:10px 0 40px">
                            <i class="icon paint brush"></i> 投稿
                        </div>


                        <form method="POST" action="" accept-charset="UTF-8"
                              id="article-create-form" class="ui form">

                            <input name="editor_unique_id" type="hidden" value="">
                            <input name="category_id" type="hidden" value="8">
                            <input name="body_html" type="hidden" value="">

                            <div class="fields">
                                <div class=" three wide field ">
                                    <div class="ui fluid search selection dropdown community-selection">
                                        <input type="hidden" name="community_id" value="0" required="">
                                        <i class="dropdown icon"></i>
                                        <input class="search" autocomplete="off" tabindex="0">
                                        <div class="text"></div>
                                        <div class="menu communities transition hidden" tabindex="-1">
                                            <div class="item" data-value="0">
                                                选择分类
                                            </div>
                                            <div class="item" data-value="1">
                                                <img class="ui image" style="width:20px;height:20px;margin-top:-2px;"
                                                     src="">
                                                Laravel
                                            </div>
                                            <div class="item" data-value="6">
                                                <img class="ui image" style="width:20px;height:20px;margin-top:-2px;"
                                                     src="">
                                                Go
                                            </div>
                                            <div class="item" data-value="8">
                                                <img class="ui image" style="width:20px;height:20px;margin-top:-2px;"
                                                     src="">
                                                PHP
                                            </div>
                                            <div class="item" data-value="5">
                                                <img class="ui image" style="width:20px;height:20px;margin-top:-2px;"
                                                     src="">
                                                Vue.js
                                            </div>
                                        </div>
                                        <div class="results"></div>
                                    </div>
                                </div>
                                <div class="thirteen wide field">
                                    <input class="form-control" type="text" name="title" id="title-field" value=""
                                           placeholder="请输入文章标题" required/>
                                </div>
                            </div>
                            <div class="inline fields">
                                <div class="five wide disabled field">
                                    <input type="text" value="网址：http://www.e7coding.com/article/" readonly disabled>
                                </div>
                                <div class="two wide field">
                                    <input type="text" placeholder="页面标识">
                                </div>
                                <div class="two wide disabled field">
                                    <input type="text" value=".html" readonly disabled>
                                </div>
                            </div>


                            <div class="field editor">
                                <div id="editormd">
                                    <textarea rows="15" id="body-field" name="body" placeholder="请使用 Markdown 编写"
                                              required></textarea>
                                </div>
                            </div>
                            <div class="ui ">
                                <div class="card-header with-border ">
                                    <h3 class="card-title">缩略图</h3>
                                </div>
                                <div class="card-body p-0">
                                    <img src="#(CPATH)#(article.thumbnail ??'/static/commons/img/nothumbnail.jpg')"
                                         style="width: 100%;"
                                         id="thumbnail">
                                    <input type="hidden" value="#(article.thumbnail ??)"
                                           name="article.thumbnail"
                                           id="articleThumbnail">
                                </div>
                                <div class="card-footer">
                                        <span class="btn  btn-default btn-sm fileinput-button">
                                            <span>选择图片</span>
                                            <input id="cfile" type="file" name="files[]" multiple>
                                        </span>
                                    <a href="javascript:;" style="padding-left: 15px" id="removeThumbnail">移除</a>
                                </div>
                            </div>
                            <div class="ui styled fluid accordion">
                                <div class="title">
                                    <i class="dropdown icon"></i>
                                    属性设置
                                </div>
                                <div class="content">
                                    <div class="field">
                                        <label>SEO关键字</label>
                                        <textarea rows="3"></textarea>
                                    </div>
                                    <div class="field">
                                        <label>SEO描述</label>
                                        <textarea rows="4"></textarea>
                                    </div>

                                    <div class="field">
                                        <label>输入标签（多个标签请用 “回车键” 或英文逗号（,）隔开）</label>
                                        <input type="text" name="position"  value=""
                                               placeholder="多个标签请用 “回车键” 或英文逗号（,）隔开" />
                                    </div>
                                </div>
                            </div>

                            <div contenteditable="true" id="pastebin"></div>

                            <div class="ui message">
                                <button type="submit" class="ui button primary publish-btn loading-on-clicked" id="">
                                    <i class="icon send"></i>
                                    保存并投稿
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </div>
    #include("../footer.html")
</div>

<!-- 登录弹窗 -->
<div class="ui modal login small" style="width:400px;margin: 0em 0em 0em -200px;">
    <i class="close icon"></i>
    <div class="header">
        <h4 class="modal-title ">
            <img class="ui image display-inline-block mr-2" style="width:32px;height:32px;"
                 src=""> <span
                style="position: relative;top: 4px;">请登录</span>
        </h4>
    </div>
    <div class="content">
        #if(option('login_qq_enable') || option('login_wechat_enable'))
        <div class="form-group row">
            #if(option('login_wechat_enable'))
            <a class="ui button fluid mt-2 green wechat-login-link" href="#(CPATH)/oauth/wechat"><i
                    class="icon wechat "></i> 微信登录</a>
            #end
            #if(option('login_qq_enable'))
            <a class="ui button fluid mt-2 basic" id="login-required-submit"
               href="#(CPATH)/oauth/qq"><i class="icon github alternate"></i> QQ 登录</a>
            #end
        </div>
        #end
    </div>
</div>
</body>



<!-- Scripts -->
<script src="../resource/js/vendors.js"></script>
<script src="../resource/js/app.js"></script>

<script type="text/javascript">
    // 本地保存内容唯一值
    Config.editor.unique_id = "articles-create_article_content_";
</script>
<script src="../resource/assets/editor/lib/codemirror/codemirror.min.js"></script>
<script src="../resource/assets/editor/js/editor.vendors.js"></script>

<script src="../resource/assets/editor/js/editor.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $('.tags.ui.dropdown')
            .dropdown({
                allowAdditions: true,
                apiSettings: {
                    url: Config.tags_url,
                    data: {
                        '_token': Config.token
                    },
                }
            });

    });

</script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#publish-hint').click(function (event) {
            event.preventDefault();
            swal({
                title: "",
                text: "确定要将发布草稿？",
                type: "warning",
                showCancelButton: true,
                cancelButtonText: "取消",
                confirmButtonText: "发布"
            }).then(function () {
                $('<input />').attr('type', 'hidden')
                    .attr('name', "subject")
                    .attr('value', "publish")
                    .appendTo('#article-edit-form');
                $("#article-edit-form").submit();
            }).catch(swal.noop);
        });

        $('.articles.ui.dropdown.search.selection')
            .dropdown({
                allowAdditions: false,
                saveRemoteData: false,
                apiSettings: {
                    url: 'https://learnku.com/my/articles/search?q={query}',
                    data: {
                        '_token': Config.token
                    },
                    cache: false,
                }
            });
    });
</script>


</html>